<?xml version="1.0" encoding="UTF-8"?>
<xml3d xmlns="http://www.w3.org/1999/xhtml">

	<defs>
	
		<shader id="shader_surface" script="urn:xml3d:shader:diffuse">
			<float3 name="diffuseColor">1 1 1</float3>
			<float name="ambientIntensity">0.5686</float>
			<float name="transparency">0.0</float>
		</shader>
		
		<shader id="shader_building" script="urn:xml3d:shader:diffuse">
			<float3 name="diffuseColor">0.8 0.8 0.8</float3>
			<float name="ambientIntensity">0.3686</float>
			<float name="transparency">0.0</float>
		</shader>
		
		<shader id="shader_silhouette" script="urn:xml3d:shader:matte">
			<float3 name="diffuseColor">1 0.5 0</float3>
		</shader>
	
	</defs>
	
	<data id="mesh_ground">
		<int name="index">0 2 1 1 2 3</int>
		<float3 name="position">
			0.0 0.0 0.0
			1.0 0.0 0.0
			0.0 0.0 1.0
			1.0 0.0 1.0
		</float3>
		<float3 name="normal">
			0.0 1.0 0.0
			0.0 1.0 0.0
			0.0 1.0 0.0
			0.0 1.0 0.0
		</float3>
		<float2 name="texcoord">
			0.0 1.0
			1.0 1.0
			0.0 0.0
			1.0 0.0
		</float2>
	</data>
	
	<dataflow id="extrude" out="position, normal">
		<float3 name="contour" param="true" />
		<float name="height" param="true" />
		<compute>
			pos1, index = xflow.extrudePolygon(contour, height);
			position = xflow.deindex(pos1, index);
			normal = xflow.generateFaceNormal(position);
		</compute>
	</dataflow>

	<dataflow id="triangulate" out="position, index">
		<data filter="rename({position: contour})">
			<data compute="index = xflow.triangulatePolygon(contour)">
				<float3 name="contour" param="true" />
			</data>
		</data>
	</dataflow>

</xml3d>